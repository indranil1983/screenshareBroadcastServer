<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>KoolTools-Share</title>
    </head>

	<body>
		<h1>Communication with socket.io!</h1>
		<img style='display: block; width: auto; height: auto' id='base64image'
			src='' />
	
		<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
		<script src="/socket.io/socket.io.js"></script>
		<script>
		
		function GetURLParameter(sParam)
		  {
		      var sPageURL = window.location.search.substring(1);
		      var sURLVariables = sPageURL.split('&');
		      for (var i = 0; i < sURLVariables.length; i++) 
		      {
		          var sParameterName = sURLVariables[i].split('=');
		          if (sParameterName[0] == sParam) 
		          {
		              return sParameterName[1];
		          }
		      }
		  }
		
		  var channel = GetURLParameter('room');
		  var socket = io('/'+channel);
		  socket.on('image', function(msg){
			  var imageString="data:image/jpeg;base64,"+msg.data;
			  $('#base64image').attr('src',imageString);
	        });
		</script>
	</body>
</html>